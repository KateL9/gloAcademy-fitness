(()=>{"use strict";const e=e=>{const t=document.getElementById(e),o=document.getElementById("thanks"),l=t.querySelector('input[type="checkbox"]'),r=t.querySelector('input[type="text"]'),n=t.querySelector('input[type="tel"]'),c=[...t.querySelectorAll("#footer_form input[type=radio]")],s=document.createElement("div");s.style.cssText="font-size: 16px",s.style.color="red",s.style.margin="5px 0 0 0";const a=()=>{setTimeout((()=>{s.textContent=""}),5e3)};l&&(l.removeAttribute("required"),r.removeAttribute("required"),n.removeAttribute("required")),t.addEventListener("submit",(e=>{if(e.preventDefault(),r&&(""==n.value||""==r.value))return t.appendChild(s),s.textContent="Необходимо заполнить все поля!",void a();l&&!l.checked?(t.appendChild(s),s.textContent="Согласитесь на обработку персональных данных",a()):(u(e,t),setTimeout((()=>{o.style.display="none"}),5e3),d(t))}));const d=()=>{[...t.querySelectorAll('input[type="text"]'),...t.querySelectorAll('input[type="tel"]')].forEach((e=>{e.value=""})),l&&(l.checked=!1),s.textContent=""};o.addEventListener("click",(e=>{(e.target.matches(".overlay")||e.target.matches("[class *= close]"))&&(o.style.display="none")}));const i=e=>{o.querySelector("p").textContent=e,o.style.display="block"};t.addEventListener("change",(()=>{(c[0]||c[1])&&(c[0].checked?c[1].checked=!1:(c[0].checked=!1,c[1].checked=!0))}));const u=(e,t)=>{e.preventDefault(),t.appendChild(s),s.textContent="Загрузка...";const o=new FormData(t);let l={};o.forEach(((e,t)=>{l[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(l).then((e=>{if(200!==e.status)throw new Error("status network not 200");i("Спасибо! Мы скоро свяжемся с вами!")})).catch((e=>{i("Что-то пошло не так..."),console.log(e)}))}};(()=>{const e=document.querySelector(".clubs-list>ul");let t=!1;document.addEventListener("click",(o=>{o.target.closest(".club-select")?t?(t=!1,e.style.display="none"):(t=!0,e.style.display="block"):(t=!1,e.style.display="none")}))})(),(()=>{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t=0;const o=()=>{e[t].style.display="none",t++,t>=e.length&&(t=0),e[t].style.display="flex"};((e=2e3)=>{setInterval(o,e)})(2e3)})(),((e="+7 (___) ___-__-__")=>{const t=document.querySelectorAll('input[type="tel"]');function o(t){const o=t.keyCode,l=e,r=l.replace(/\D/g,""),n=this.value.replace(/\D/g,"");let c=0,s=l.replace(/[_\d]/g,(e=>c<n.length?n.charAt(c++)||r.charAt(c):e));c=s.indexOf("_"),-1!==c&&(s=s.slice(0,c));let a=l.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(this.value)||this.value.length<6||o>47&&o<58)&&(this.value=s),"blur"===t.type&&this.value.length<6&&(this.value="")}for(const e of t)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)})(),(()=>{const e=/^[а-яА-Я]+$/;document.body.addEventListener("focusout",(t=>{let o=t.target;"name"==o.name&&"Промокод"!==o.placeholder?(o.style.border="1px solid #b7b7b7",o.setCustomValidity(""),(!e.test(o.value)||o.value.length<2)&&(o.setCustomValidity("Введите имя"),o.value="",o.style.border="3px solid red")):o.style.border="1px solid #b7b7b7"}))})(),e("form1"),e("form2"),e("card_order"),e("banner-form"),e("footer_form"),(()=>{const e=document.querySelector("div#free_visit_form"),t=document.querySelector("div#callback_form"),o=document.querySelector("#gift");document.querySelector("#callback_footer_form-phone"),document.body.addEventListener("click",(l=>{l.target.matches(".open-popup")?e.style.display="block":l.target.matches(".callback-btn")?l.target.closest("#footer_form")||(t.style.display="block"):l.target.closest(".fixed-gift")?(l.target.style.display="none",o.style.display="block"):(l.target.matches(".overlay")||l.target.matches("[class *= close]"))&&document.querySelectorAll(".popup").forEach((e=>{e.style.display="none"}))}))})(),(()=>{const e=document.getElementById("card_order"),t=document.querySelector("#price-total"),o=document.querySelector('input[placeholder = "Промокод"]'),l=document.querySelector("#card_leto_mozaika"),r=document.querySelector("#card_leto_schelkovo"),n={mozaika:{1:1999,6:9900,9:13900,12:19900},schelkovo:{1:2999,6:14990,9:21990,12:24990}};let c=1;e.addEventListener("change",(e=>{var s;e.target.closest(".time")?(l&&l.checked&&(c=e.target.value,t.innerHTML=n.mozaika[e.target.value]),r&&r.checked&&(c=e.target.value,t.innerHTML=n.schelkovo[e.target.value])):(r.checked?t.innerHTML=n.schelkovo[c]:l.checked&&(t.innerHTML=n.mozaika[c]),e.target.matches('input[placeholder = "Промокод"]')&&(s=e.target.value,o&&"ТЕЛО2020"===s.trim()&&(t.innerHTML=t.textContent-Math.floor(.3*t.textContent))))}))})(),(()=>{const e=document.querySelector("#totop");e.style.display="none",window.addEventListener("scroll",(t=>{t.preventDefault(),window.pageYOffset>680?e.style.display="block":e.style.display="none"})),e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}))})()})();