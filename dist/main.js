(()=>{"use strict";const e=e=>{const t=document.getElementById(e),l=document.getElementById("thanks"),o=t.querySelector('input[type="checkbox"]'),n=t.querySelector('input[type="text"]'),r=t.querySelector('input[type="tel"]'),s=[...t.querySelectorAll("input[type=radio]")],c=document.createElement("div");c.style.cssText="font-size: 16px",c.style.color="red",c.style.margin="5px 0 0 0";const a=()=>{setTimeout((()=>{c.textContent=""}),5e3)};o&&(o.removeAttribute("required"),n.removeAttribute("required"),r.removeAttribute("required")),t.addEventListener("submit",(e=>{if(e.preventDefault(),n&&(""==r.value||""==n.value))return t.appendChild(c),c.textContent="Необходимо заполнить все поля!",void a();o&&!o.checked?(t.appendChild(c),c.textContent="Согласитесь на обработку персональных данных",a()):(u(e,t),d(t),setTimeout((()=>{l.style.display="none"}),5e3))}));const d=()=>{[...t.querySelectorAll("input")].forEach((e=>{e.value=""})),o&&(o.checked=!1),c.textContent=""};l.addEventListener("click",(e=>{(e.target.matches(".overlay")||e.target.matches("[class *= close]"))&&(l.style.display="none")}));const i=e=>{l.querySelector("p").textContent=e,l.style.display="block"};t.addEventListener("change",(e=>{s[0].checked?s[1].checked=!1:(s[0].checked=!1,s[1].checked=!0)}));const u=(e,t)=>{e.preventDefault(),t.appendChild(c),c.textContent="Загрузка...";const l=new FormData(t);let o={};l.forEach(((e,t)=>{o[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(o).then((e=>{if(200!==e.status)throw new Error("status network not 200");i("Спасибо! Мы скоро свяжемся с вами!")})).catch((e=>{i("Что-то пошло не так..."),console.log(e)}))}};(()=>{const e=document.querySelector(".clubs-list>ul");let t=!1;document.addEventListener("click",(l=>{l.target.closest(".club-select")?t?(t=!1,e.style.display="none"):(t=!0,e.style.display="block"):(t=!1,e.style.display="none")}))})(),(()=>{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t=0;const l=()=>{e[t].style.display="none",t++,t>=e.length&&(t=0),e[t].style.display="flex"};((e=2e3)=>{setInterval(l,e)})(2e3)})(),((e="+7 (___) ___-__-__")=>{const t=document.querySelectorAll('input[type="tel"]');function l(t){const l=t.keyCode,o=e,n=o.replace(/\D/g,""),r=this.value.replace(/\D/g,"");let s=0,c=o.replace(/[_\d]/g,(e=>s<r.length?r.charAt(s++)||n.charAt(s):e));s=c.indexOf("_"),-1!==s&&(c=c.slice(0,s));let a=o.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(this.value)||this.value.length<6||l>47&&l<58)&&(this.value=c),"blur"===t.type&&this.value.length<6&&(this.value="")}for(const e of t)e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",l)})(),(()=>{const e=/^[а-яА-Я]+$/;document.body.addEventListener("focusout",(t=>{let l=t.target;"name"==l.name&&"Промокод"!==l.placeholder?(l.style.border="1px solid #b7b7b7",l.setCustomValidity(""),(!e.test(l.value)||l.value.length<2)&&(l.setCustomValidity("Введите имя"),l.value="",l.style.border="3px solid red")):l.style.border="1px solid #b7b7b7"}))})(),e("form1"),e("form2"),e("card_order"),e("banner-form"),e("banner-form"),(()=>{const e=document.querySelector("div#free_visit_form"),t=document.querySelector("div#callback_form"),l=document.querySelector("#gift");document.querySelector("#callback_footer_form-phone"),document.body.addEventListener("click",(o=>{o.target.matches(".open-popup")?e.style.display="block":o.target.matches(".callback-btn")?o.target.closest("#footer_form")||(t.style.display="block"):o.target.closest(".fixed-gift")?(o.target.style.display="none",l.style.display="block"):(o.target.matches(".overlay")||o.target.matches("[class *= close]"))&&document.querySelectorAll(".popup").forEach((e=>{e.style.display="none"}))}))})()})();