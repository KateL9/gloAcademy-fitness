(()=>{"use strict";const e=e=>{const t=document.getElementById(e),l=t.querySelector('input[type="checkbox"]'),o=t.querySelector('input[type="text"]'),r=t.querySelector('input[type="tel"]'),n=document.createElement("div");n.style.cssText="font-size: 16px",n.style.color="red",n.style.margin="5px 0 0 0";const s=()=>{setTimeout((()=>{n.textContent=""}),5e3)};l&&(l.removeAttribute("required"),o.removeAttribute("required"),r.removeAttribute("required")),t.addEventListener("submit",(e=>{if(e.preventDefault(),o&&(""==r.value||""==o.value))return t.appendChild(n),n.textContent="Необходимо заполнить все поля!",void s();l&&!l.checked?(t.appendChild(n),n.textContent="Согласитесь на обработку персональных данных",s()):(a(e,t),c(t))}));const c=()=>{[...t.querySelectorAll("input")].forEach((e=>{e.value=""})),l.checked=!1},a=(e,t)=>{e.preventDefault(),t.appendChild(n),n.textContent="Загрузка...";const l=new FormData(t);let o={};l.forEach(((e,t)=>{o[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(o).then((e=>{if(200!==e.status)throw new Error("status network not 200");n.textContent="Спасибо! Мы скоро свяжемся с вами!"})).catch((e=>{n.textContent="Что-то пошло не так...",console.log(e)}))}};(()=>{const e=document.querySelector(".clubs-list>ul");let t=!1;document.addEventListener("click",(l=>{l.target.closest(".club-select")?t?(t=!1,e.style.display="none"):(t=!0,e.style.display="block"):(t=!1,e.style.display="none")}))})(),(()=>{const e=document.querySelector("div#free_visit_form"),t=document.querySelector("div#callback_form"),l=document.querySelector("#gift"),o=document.querySelector("#callback_footer_form-phone");document.body.addEventListener("click",(r=>{r.target.matches(".open-popup")?e.style.display="block":r.target.matches(".callback-btn")?(!r.target.closest("#footer_form")||r.target.closest("#footer_form")&&o.value)&&(t.style.display="block"):r.target.closest(".fixed-gift")?(r.target.style.display="none",l.style.display="block"):(r.target.matches(".overlay")||r.target.matches("[class *= close]"))&&(e.style.display="none",t.style.display="none",l.style.display="none")}))})(),(()=>{const e=[...document.querySelector(".main-slider").querySelectorAll(".slide")];let t=0;const l=()=>{var l,o;t>=e.length-1&&(t=0),(l=e)[o=t].style.display="none",l[o+1].style.display="flex",++t};((e=2e3)=>{setInterval(l,e)})(2e3)})(),((e="+7 (___) ___-__-__")=>{const t=document.querySelectorAll('input[type="tel"]');function l(t){const l=t.keyCode,o=e,r=o.replace(/\D/g,""),n=this.value.replace(/\D/g,"");let s=0,c=o.replace(/[_\d]/g,(e=>s<n.length?n.charAt(s++)||r.charAt(s):e));s=c.indexOf("_"),-1!==s&&(c=c.slice(0,s));let a=o.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(this.value)||this.value.length<6||l>47&&l<58)&&(this.value=c),"blur"===t.type&&this.value.length<6&&(this.value="")}for(const e of t)e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",l)})(),(()=>{const e=/^[а-яА-Я]+$/;document.body.addEventListener("focusout",(t=>{let l=t.target;"name"==l.name&&"Промокод"!==l.placeholder?(l.style.border="1px solid #b7b7b7",l.setCustomValidity(""),(!e.test(l.value)||l.value.length<2)&&(l.setCustomValidity("Введите имя"),l.value="",l.style.border="3px solid red")):l.style.border="1px solid #b7b7b7"}))})(),e("form1"),e("form2"),e("card_order"),e("banner-form")})();